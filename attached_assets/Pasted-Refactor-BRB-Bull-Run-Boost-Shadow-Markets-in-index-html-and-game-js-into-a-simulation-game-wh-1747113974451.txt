Refactor "BRB Bull Run Boost Shadow Markets" in `index.html` and `game.js` into a simulation game where a character navigates a map, interacts with farming, ranching, a Saloon mini-game, and an Ether Range for nighttime activities. Use Phaser exclusively for game logic, rendering, and animations (no vanilla JS for gameplay). Keep Socket.IO for real-time updates and HTML for minimal UI (resources, notifications). Focus on a basic MVP with core mechanics, reusing existing quests and tooltips.

1. **Setup and Map**:
   - In `game.js`, create a Phaser game (800x600) with scenes: `MainScene`, `SaloonScene`, `EtherScene`.
   - In `MainScene`, load a map background (`town-bg.png`) and create a 10x10 grid (80x80px cells). Place sprites: Ranch field at (2,2) (`field-empty.png`), Pasture at (3,2) (`pasture.png`), Saloon at (5,5) (`saloon.png`), Ether Portal at (7,3) (`portal.png`).
   - Add a character (`character.png`, scale 0.5) at (1,1). Use WASD keys to move (speed: 100px/s) with collision detection for buildings (use Phaser physics arcade).

2. **Daytime Mechanics (Ranch)**:
   - **Farming**: Add a “Buy Seeds” button in `#ui-container`. On click (costs 10 $CATTLE), enable planting: click the field at (2,2) to plant (`field-growing.png`, 30s timer, then `field-ready.png`). Harvesting yields 20 Wheat (add to `playerData.wheat`).
   - **Cattle Ranch**: Add a “Buy Cattle” button (20 $CATTLE, choose Milk Cow or Rodeo Bull). Place in Pasture at (3,2). Feed 5 Hay every 30s (from `playerData.hay`). Milk Cows produce 10 $CATTLE worth of Milk every 30s; Rodeo Bulls earn 20 $CATTLE after 60s training. Use `cattle.png` with a grazing animation (yoyo tween, 1000ms).
   - Start `playerData`: `cattleBalance` (100), `hay` (50), `wheat` (0), `crystals` (0), `potions` (0).

3. **Saloon Mini-Game**:
   - Walk to Saloon at (5,5), press Space to enter `SaloonScene`. Reuse the horse race mini-game: wager 10 $CATTLE, 50% chance to win 20 $CATTLE (use `horse-hearts.png`, tween x-position as before). Press Esc to return to `MainScene`.

4. **Nighttime (Ether Range)**:
   - Walk to Portal at (7,3), press Space to enter `EtherScene`. Load a background (`ether-bg.png`).
   - Add 3 Crystal nodes at (2,2), (3,3), (4,2) (`crystal.png`). Click to gather 5 Crystals each (add to `playerData.crystals`, respawn after 60s).
   - Add a Cauldron at (5,5) (`cauldron.png`). Click to craft a Potion (10 Crystals + 5 $CATTLE), sell for 20-30 $CATTLE (random), or apply a boost (+10% Milk earnings for 60s). Emit `potion-crafted` via Socket.IO.

5. **UI and Quests**:
   - Update `#ui-container` to show `cattleBalance`, `hay`, `wheat`, `crystals`, `potions`.
   - Add tooltips (Phaser text, 16px Arial, bg #000, alpha 0.8): on field hover, “Budgeting: Balance resources”; on Cauldron, “Supply/Demand: Sell high!”
   - Reuse existing quests: “Plant 2 Wheat” (reward: 10 $CATTLE), “Sell 1 Potion” (reward: 15 $CATTLE). Show in `#quest-log`.

6. **Polish**:
   - Add notifications in `#notification` (e.g., “Wheat harvested: +20”).
   - Emit Socket.IO events: `crop-harvested`, `cattle-earned`, `potion-sold`.

Start with the map and character movement, then add farming and ranching, followed by Saloon and Ether Range. Test each feature incrementally. Log changes to console for debugging.